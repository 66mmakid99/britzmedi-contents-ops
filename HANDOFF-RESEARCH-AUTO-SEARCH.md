# HANDOFF ë³´ì¶©: ë…¼ë¬¸/ì—°êµ¬ í•´ì„¤ ìœ í˜• ì „ë©´ ì¬ì„¤ê³„

> ì´ ë¬¸ì„œëŠ” HANDOFF-CONTENT-TYPES-EXPANSION.mdì˜ `research` ìœ í˜•ì„ ëŒ€ì²´í•©ë‹ˆë‹¤.
> ê¸°ì¡´ ì„¤ê³„(ìˆ˜ë™ ì…ë ¥ í¼)ë¥¼ íê¸°í•˜ê³ , ìë™ ê²€ìƒ‰ â†’ ì¶”ì²œ â†’ ì›í´ë¦­ ìƒì„±ìœ¼ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.

---

## ë¬¸ì œ

ê¸°ì¡´ ì„¤ê³„:
```
ë§ˆì¼€í„°ê°€ ì§ì ‘ ì…ë ¥í•´ì•¼ í•¨:
- ë…¼ë¬¸ ì œëª© (ì–´ë””ì„œ ì°¾ì§€?)
- ì €ë„/ì¶œì²˜ (ëª¨ë¥´ëŠ”ë°?)
- DOI (ë­”ë°?)
- í•µì‹¬ ê²°ë¡  (ë…¼ë¬¸ì„ ì½ì–´ì•¼ ì•„ëŠ”ë°?)
- ê´€ë ¨ ì œí’ˆ (ì´ê²ƒë§Œ ì•Œì•„)
- ì œí’ˆ ì—°ê²° í¬ì¸íŠ¸ (ì´ê²ƒë„ AIê°€ í•´ì•¼ì§€)
```

ì´ê±´ ì½˜í…ì¸  íŒ©í† ë¦¬ê°€ ì•„ë‹ˆë¼ **ìˆ˜ë™ ì‘ì—… ë„êµ¬**ë‹¤.

---

## ëª©í‘œ ìƒíƒœ

```
[ë…¼ë¬¸ í•´ì„¤] íƒ­ í´ë¦­
    â†“
AIê°€ ìë™ìœ¼ë¡œ BRITZMEDI ì œí’ˆ ê´€ë ¨ ìµœì‹  ë…¼ë¬¸ ê²€ìƒ‰
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‘ ì´ë²ˆ ë‹¬ ì¶”ì²œ ë…¼ë¬¸                                 â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ”¥ ì¶”ì²œ                                      â”‚    â”‚
â”‚  â”‚ Monopolar RFë¡œ í”¼ë¶€ íƒ„ë ¥ ê°œì„  + í”¼ì§€ ê°ì†Œ     â”‚    â”‚
â”‚  â”‚ J of Cosmetic Dermatology, 2025             â”‚    â”‚
â”‚  â”‚ í•µì‹¬: 32ëª… ëŒ€ìƒ, ì½œë¼ê²+íƒ„ì„±ì„¬ìœ  ë°€ë„ ì¦ê°€     â”‚    â”‚
â”‚  â”‚ ì—°ê²°: TORR RFì˜ ëª¨ë…¸í´ë¼ ê³ ì£¼íŒŒ ì›ë¦¬ ë™ì¼     â”‚    â”‚
â”‚  â”‚                                             â”‚    â”‚
â”‚  â”‚  [ì´ ë…¼ë¬¸ìœ¼ë¡œ ì½˜í…ì¸  ë§Œë“¤ê¸°]                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ RF í”¼ë¶€ ì¬ìƒ ê¸°ìˆ  ì¢…í•© ë¦¬ë·° (2026)            â”‚    â”‚
â”‚  â”‚ Health Science Reports, 2026                â”‚    â”‚
â”‚  â”‚ í•µì‹¬: ëª¨ë…¸í´ë¼/ë°”ì´í´ë¼/ë©€í‹°í´ë¼ RF ì „ì²´ ë¹„êµ  â”‚    â”‚
â”‚  â”‚ ì—°ê²°: TORR RF í† ë¡œì´ë‹¬ ê¸°ìˆ ì˜ í•™ìˆ ì  ê·¼ê±°      â”‚    â”‚
â”‚  â”‚                                             â”‚    â”‚
â”‚  â”‚  [ì´ ë…¼ë¬¸ìœ¼ë¡œ ì½˜í…ì¸  ë§Œë“¤ê¸°]                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ë§ˆì´í¬ë¡œë‹ˆë“¤ RF í”¼ë¶€ ì¬ìƒ íš¨ê³¼ ë¶„ì„            â”‚    â”‚
â”‚  â”‚ Frontiers in Medicine, 2025                 â”‚    â”‚
â”‚  â”‚ í•µì‹¬: 38ëª… ëŒ€ìƒ, ì½œë¼ê² ì¬ë°°ì—´ + í‘œí”¼ ë‘ê»˜ ì¦ê°€â”‚    â”‚
â”‚  â”‚ ì—°ê²°: RF ì—ë„ˆì§€ ì „ë‹¬ ì›ë¦¬ ê³µìœ                 â”‚    â”‚
â”‚  â”‚                                             â”‚    â”‚
â”‚  â”‚  [ì´ ë…¼ë¬¸ìœ¼ë¡œ ì½˜í…ì¸  ë§Œë“¤ê¸°]                   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚
â”‚  [ğŸ” ë‹¤ë¥¸ í‚¤ì›Œë“œë¡œ ê²€ìƒ‰]  [ğŸ”„ ìƒˆë¡œê³ ì¹¨]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ë§ˆì¼€í„°ê°€ í•˜ëŠ” ì¼: **"ì´ ë…¼ë¬¸ìœ¼ë¡œ ì½˜í…ì¸  ë§Œë“¤ê¸°" ë²„íŠ¼ í´ë¦­** â€” ë.

---

## ì „ì²´ í”Œë¡œìš°

```
Step 1: ë…¼ë¬¸ ìë™ ê²€ìƒ‰ (PubMed API)
  â””â†’ BRITZMEDI ì œí’ˆ í‚¤ì›Œë“œë¡œ ê´€ë ¨ ë…¼ë¬¸ ìë™ ê²€ìƒ‰
  â””â†’ ìµœì‹ ìˆœ ì •ë ¬, ìµœê·¼ 2ë…„ í•„í„°

Step 2: AIê°€ ë…¼ë¬¸ ìš”ì•½ + ì œí’ˆ ì—°ê²° ë¶„ì„ (1ì°¨ API í˜¸ì¶œ)
  â””â†’ ê° ë…¼ë¬¸ì˜ í•µì‹¬ ê²°ë¡  í•œì¤„ ìš”ì•½
  â””â†’ BRITZMEDI ì œí’ˆê³¼ì˜ ì—°ê²° í¬ì¸íŠ¸ ìë™ ìƒì„±
  â””â†’ ì½˜í…ì¸  ì˜í–¥ë ¥ ì ìˆ˜ (1~5ì )

Step 3: ì¶”ì²œ ë¦¬ìŠ¤íŠ¸ í‘œì‹œ
  â””â†’ ì˜í–¥ë ¥ ë†’ì€ ìˆœìœ¼ë¡œ ì •ë ¬
  â””â†’ "ğŸ”¥ ì¶”ì²œ" ë°°ì§€

Step 4: ë§ˆì¼€í„°ê°€ ë…¼ë¬¸ ì„ íƒ (í´ë¦­ í•˜ë‚˜)

Step 5: AIê°€ ì±„ë„ë³„ ì½˜í…ì¸  ìë™ ìƒì„± (2ì°¨ API í˜¸ì¶œ)
  â””â†’ ì„ íƒí•œ ë…¼ë¬¸ + ì œí’ˆ ì—°ê²° í¬ì¸íŠ¸ë¥¼ ì†ŒìŠ¤ë¡œ
  â””â†’ LinkedIn, ë„¤ì´ë²„ ë¸”ë¡œê·¸, ë‰´ìŠ¤ë ˆí„° ë“± ì±„ë„ë³„ ìƒì„±

Step 6: ìë™ ê²€ìˆ˜ (3ì°¨ API í˜¸ì¶œ)
  â””â†’ ë…¼ë¬¸ ë‚´ìš© ë‚ ì¡° ì—¬ë¶€ ê²€ìˆ˜
  â””â†’ ì˜ë£Œë²• ìœ„ë°˜ í‘œí˜„ ê²€ìˆ˜

Step 7: ë§ˆì¼€í„°ê°€ ë³µì‚¬ â†’ ë¶™ì—¬ë„£ê¸°
```

---

## ê¸°ìˆ  êµ¬í˜„ ìƒì„¸

### 1. PubMed ë…¼ë¬¸ ê²€ìƒ‰ í•¨ìˆ˜

#### ìƒˆ íŒŒì¼: `src/lib/pubmedSearch.js`

PubMedëŠ” ë¬´ë£Œ ê³µê°œ APIë¥¼ ì œê³µí•©ë‹ˆë‹¤ (E-utilities).
API í‚¤ ë¶ˆí•„ìš”, rate limitë§Œ ì£¼ì˜ (ì´ˆë‹¹ 3íšŒ).

```javascript
/**
 * PubMed E-utilities APIë¥¼ í†µí•œ ë…¼ë¬¸ ê²€ìƒ‰
 * https://www.ncbi.nlm.nih.gov/books/NBK25497/
 */

const ESEARCH_URL = 'https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi';
const EFETCH_URL = 'https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi';
const ESUM_URL = 'https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi';

/**
 * BRITZMEDI ì œí’ˆ ê´€ë ¨ ì‚¬ì „ ì •ì˜ ê²€ìƒ‰ ì¿¼ë¦¬
 * ì´ ì¿¼ë¦¬ë“¤ë¡œ ìë™ ê²€ìƒ‰
 */
export const RESEARCH_QUERIES = [
  {
    id: 'rf_skin_tightening',
    label: 'RF í”¼ë¶€ íƒ€ì´íŠ¸ë‹',
    query: '(radiofrequency) AND (skin tightening OR skin laxity OR collagen remodeling)',
    products: ['torr_rf'],
    description: 'ê³ ì£¼íŒŒ í”¼ë¶€ íƒ€ì´íŠ¸ë‹ ê´€ë ¨ ì—°êµ¬',
  },
  {
    id: 'rf_collagen',
    label: 'RF ì½œë¼ê² ì¬ìƒ',
    query: '(radiofrequency) AND (collagen synthesis OR neocollagenesis OR collagen density)',
    products: ['torr_rf'],
    description: 'RF ì—ë„ˆì§€ì™€ ì½œë¼ê² ìƒì„± ë©”ì»¤ë‹ˆì¦˜',
  },
  {
    id: 'microneedle_rf',
    label: 'ë§ˆì´í¬ë¡œë‹ˆë“¤ RF',
    query: '(microneedle radiofrequency OR fractional RF) AND (skin rejuvenation OR acne scar)',
    products: ['torr_rf', 'newchae'],
    description: 'ë§ˆì´í¬ë¡œë‹ˆë“¤ RF ì‹œìˆ  íš¨ê³¼',
  },
  {
    id: 'aesthetic_device_safety',
    label: 'ë¯¸ìš©ì˜ë£Œê¸°ê¸° ì•ˆì „ì„±',
    query: '(energy-based device OR aesthetic device) AND (safety OR adverse event) AND (radiofrequency OR RF)',
    products: ['torr_rf', 'ulblanc', 'lumino_wave'],
    description: 'ì—ë„ˆì§€ ê¸°ë°˜ ë¯¸ìš©ì˜ë£Œê¸°ê¸° ì•ˆì „ì„± ì—°êµ¬',
  },
  {
    id: 'body_contouring_rf',
    label: 'RF ë°”ë”” ì»¨íˆ¬ì–´ë§',
    query: '(radiofrequency) AND (body contouring OR body shaping OR circumference reduction)',
    products: ['torr_rf'],
    description: 'RFë¥¼ ì´ìš©í•œ ë°”ë”” ì»¨íˆ¬ì–´ë§',
  },
  {
    id: 'skin_rejuvenation_review',
    label: 'í”¼ë¶€ ì¬ìƒ ì¢…í•© ë¦¬ë·°',
    query: '(skin rejuvenation) AND (radiofrequency) AND (review OR systematic review OR meta-analysis)',
    products: ['torr_rf', 'lumino_wave'],
    description: 'RF í”¼ë¶€ ì¬ìƒ ë¶„ì•¼ ì¢…í•© ë¦¬ë·° ë…¼ë¬¸',
  },
];

/**
 * PubMed ê²€ìƒ‰ (Step 1)
 * @param {string} query - ê²€ìƒ‰ ì¿¼ë¦¬
 * @param {number} maxResults - ìµœëŒ€ ê²°ê³¼ ìˆ˜ (ê¸°ë³¸ 10)
 * @param {number} recentYears - ìµœê·¼ Në…„ (ê¸°ë³¸ 2)
 * @returns {Promise<string[]>} PubMed ID ëª©ë¡
 */
export async function searchPubMed(query, maxResults = 10, recentYears = 2) {
  const minDate = new Date();
  minDate.setFullYear(minDate.getFullYear() - recentYears);
  const minDateStr = `${minDate.getFullYear()}/${String(minDate.getMonth() + 1).padStart(2, '0')}/${String(minDate.getDate()).padStart(2, '0')}`;

  const params = new URLSearchParams({
    db: 'pubmed',
    term: query,
    retmax: maxResults.toString(),
    sort: 'date',  // ìµœì‹ ìˆœ
    mindate: minDateStr,
    retmode: 'json',
  });

  const res = await fetch(`${ESEARCH_URL}?${params}`);
  if (!res.ok) throw new Error(`PubMed search failed: ${res.status}`);

  const data = await res.json();
  return data.esearchresult?.idlist || [];
}

/**
 * PubMed IDë¡œ ë…¼ë¬¸ ìƒì„¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
 * @param {string[]} pmids - PubMed ID ëª©ë¡
 * @returns {Promise<object[]>} ë…¼ë¬¸ ì •ë³´ ë°°ì—´
 */
export async function fetchPaperDetails(pmids) {
  if (!pmids.length) return [];

  const params = new URLSearchParams({
    db: 'pubmed',
    id: pmids.join(','),
    retmode: 'json',
  });

  const res = await fetch(`${ESUM_URL}?${params}`);
  if (!res.ok) throw new Error(`PubMed fetch failed: ${res.status}`);

  const data = await res.json();
  const results = data.result || {};

  return pmids.map(pmid => {
    const paper = results[pmid];
    if (!paper) return null;
    return {
      pmid,
      title: paper.title || '',
      authors: (paper.authors || []).map(a => a.name).join(', '),
      journal: paper.source || '',
      pubDate: paper.pubdate || '',
      doi: (paper.articleids || []).find(id => id.idtype === 'doi')?.value || '',
      abstract: '',  // eSummaryì—ëŠ” ì´ˆë¡ ì—†ìŒ, í•„ìš”í•˜ë©´ eFetch ë³„ë„ í˜¸ì¶œ
      url: `https://pubmed.ncbi.nlm.nih.gov/${pmid}/`,
    };
  }).filter(Boolean);
}

/**
 * ë…¼ë¬¸ ì´ˆë¡ ê°€ì ¸ì˜¤ê¸° (ì„ íƒ: AI ë¶„ì„ì— í•„ìš”í•  ë•Œë§Œ)
 * eFetchëŠ” XML ë°˜í™˜í•˜ë¯€ë¡œ íŒŒì‹± í•„ìš”
 */
export async function fetchAbstract(pmid) {
  const params = new URLSearchParams({
    db: 'pubmed',
    id: pmid,
    retmode: 'xml',
    rettype: 'abstract',
  });

  const res = await fetch(`${EFETCH_URL}?${params}`);
  if (!res.ok) return '';

  const xml = await res.text();
  // ê°„ë‹¨í•œ XML íŒŒì‹± (AbstractText ì¶”ì¶œ)
  const match = xml.match(/<AbstractText[^>]*>([\s\S]*?)<\/AbstractText>/g);
  if (!match) return '';

  return match
    .map(m => m.replace(/<[^>]+>/g, '').trim())
    .join(' ');
}

/**
 * ì „ì²´ ìë™ ê²€ìƒ‰ í”„ë¡œì„¸ìŠ¤
 * ì‚¬ì „ ì •ì˜ëœ ì¿¼ë¦¬ë“¤ë¡œ ê²€ìƒ‰ â†’ ì¤‘ë³µ ì œê±° â†’ ë…¼ë¬¸ ì •ë³´ ë°˜í™˜
 */
export async function autoSearchPapers(queryIds = null, maxPerQuery = 5) {
  const queries = queryIds
    ? RESEARCH_QUERIES.filter(q => queryIds.includes(q.id))
    : RESEARCH_QUERIES;

  const allPmids = new Set();
  const pmidQueryMap = {};  // pmid â†’ ì–´ë–¤ ì¿¼ë¦¬ì—ì„œ ë‚˜ì™”ëŠ”ì§€

  for (const q of queries) {
    try {
      const pmids = await searchPubMed(q.query, maxPerQuery);
      pmids.forEach(pmid => {
        allPmids.add(pmid);
        if (!pmidQueryMap[pmid]) pmidQueryMap[pmid] = [];
        pmidQueryMap[pmid].push(q);
      });
      // PubMed rate limit ì¤€ìˆ˜ (ì´ˆë‹¹ 3íšŒ)
      await new Promise(r => setTimeout(r, 350));
    } catch (e) {
      console.warn(`Query "${q.label}" failed:`, e);
    }
  }

  const papers = await fetchPaperDetails([...allPmids]);

  // ì¿¼ë¦¬ ë§¤í•‘ ì •ë³´ ì¶”ê°€
  return papers.map(paper => ({
    ...paper,
    matchedQueries: pmidQueryMap[paper.pmid] || [],
    relatedProducts: [...new Set(
      (pmidQueryMap[paper.pmid] || []).flatMap(q => q.products)
    )],
  }));
}
```

---

### 2. AI ë¶„ì„ í•¨ìˆ˜ (ë…¼ë¬¸ ìš”ì•½ + ì œí’ˆ ì—°ê²°)

#### `src/lib/researchAnalyzer.js` (ì‹ ê·œ)

```javascript
/**
 * AIê°€ ë…¼ë¬¸ì„ ë¶„ì„í•˜ì—¬ ì½˜í…ì¸  ì¶”ì²œ ìƒì„±
 */
import { fetchAbstract } from './pubmedSearch';

/**
 * ë…¼ë¬¸ ë°°ì¹˜ë¥¼ AIë¡œ ë¶„ì„ (1íšŒ API í˜¸ì¶œë¡œ ì—¬ëŸ¬ ë…¼ë¬¸ ì²˜ë¦¬)
 * @param {object[]} papers - PubMed ë…¼ë¬¸ ëª©ë¡
 * @param {string} apiKey - Claude API key
 * @returns {Promise<object[]>} ë¶„ì„ëœ ë…¼ë¬¸ + ì¶”ì²œ ì •ë³´
 */
export async function analyzePapers(papers, apiKey) {
  // ì´ˆë¡ì´ ì—†ëŠ” ë…¼ë¬¸ì€ ê°€ì ¸ì˜¤ê¸°
  const papersWithAbstract = await Promise.all(
    papers.slice(0, 10).map(async (paper) => {  // ìµœëŒ€ 10ê°œë§Œ
      if (!paper.abstract) {
        paper.abstract = await fetchAbstract(paper.pmid);
      }
      return paper;
    })
  );

  // ì´ˆë¡ì´ ìˆëŠ” ë…¼ë¬¸ë§Œ í•„í„°
  const validPapers = papersWithAbstract.filter(p => p.abstract && p.abstract.length > 50);

  if (validPapers.length === 0) return [];

  const paperList = validPapers.map((p, i) => 
    `[ë…¼ë¬¸ ${i + 1}]
ì œëª©: ${p.title}
ì €ë„: ${p.journal} (${p.pubDate})
DOI: ${p.doi}
ê´€ë ¨ ì œí’ˆ: ${p.relatedProducts.join(', ')}
ì´ˆë¡: ${p.abstract.slice(0, 500)}...`
  ).join('\n\n');

  const prompt = `ë‹¹ì‹ ì€ BRITZMEDI(ì˜ë£Œê¸°ê¸° ì „ë¬¸ê¸°ì—…)ì˜ ì½˜í…ì¸  ì „ëµê°€ì…ë‹ˆë‹¤.

BRITZMEDI ì œí’ˆ:
- TORR RF: FDA ìŠ¹ì¸ í† ë¡œì´ë‹¬(TOROIDAL) ê³ ì£¼íŒŒ ì˜ë£Œê¸°ê¸°. í”¼ë¶€ íƒ€ì´íŠ¸ë‹/ë¦¬í”„íŒ….
- NEWCHAE (ë‰´ì±„): í”¼ë¶€ ê´€ë¦¬ ë””ë°”ì´ìŠ¤
- ULBLANC (ìš¸ë¸”ë‘): ì—ìŠ¤í…Œí‹± ë””ë°”ì´ìŠ¤
- LUMINO WAVE (ë£¨ë¯¸ë…¸ì›¨ì´ë¸Œ): ì—ë„ˆì§€ ê¸°ë°˜ ë””ë°”ì´ìŠ¤ (2ì„¸ëŒ€)

ì•„ë˜ ë…¼ë¬¸ë“¤ì„ ë¶„ì„í•˜ì—¬, ê° ë…¼ë¬¸ì´ BRITZMEDI ë§ˆì¼€íŒ… ì½˜í…ì¸ ë¡œ í™œìš© ê°€ëŠ¥í•œì§€ í‰ê°€í•˜ì„¸ìš”.

${paperList}

[ì¶œë ¥ í˜•ì‹ â€” JSON ë°°ì—´ë¡œë§Œ ì‘ë‹µ]
[
  {
    "index": 1,
    "summary_kr": "í•œêµ­ì–´ í•µì‹¬ ê²°ë¡  1~2ë¬¸ì¥",
    "product_connection": "ì´ ë…¼ë¬¸ê³¼ BRITZMEDI ì œí’ˆì˜ ì—°ê²° í¬ì¸íŠ¸ 1ë¬¸ì¥",
    "content_angle": "ì´ ë…¼ë¬¸ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” ì½˜í…ì¸  ê°ë„ 1ë¬¸ì¥",
    "impact_score": 4,  // 1~5 (5=ë§¤ìš° ë†’ìŒ). ìµœì‹ ì„±, ì‹ ë¢°ë„, ì œí’ˆ ì—°ê´€ì„±, ë…ì ê´€ì‹¬ë„ ì¢…í•©
    "recommended_channels": ["linkedin", "naver-blog"],
    "headline_suggestion": "ì½˜í…ì¸  ì œëª© ì œì•ˆ"
  }
]

[ê·œì¹™]
1. ë…¼ë¬¸ì— ì—†ëŠ” ë‚´ìš©ì„ ì¶”ê°€í•˜ì§€ ë§ˆë¼.
2. ì œí’ˆ ì—°ê²°ì´ ì–µì§€ìŠ¤ëŸ¬ìš°ë©´ impact_scoreë¥¼ ë‚®ê²Œ ì¤˜ë¼.
3. ì‹¤ì œ ë§ˆì¼€íŒ…ì— ì“¸ ìˆ˜ ì—†ëŠ” ë…¼ë¬¸(ë„ˆë¬´ ì˜¤ë˜ëê±°ë‚˜, ê´€ë ¨ ì—†ê±°ë‚˜)ì€ impact_score 1ì„ ì¤˜ë¼.
4. JSONë§Œ ì¶œë ¥. ë‹¤ë¥¸ í…ìŠ¤íŠ¸ ì—†ì´.`;

  const res = await fetch('https://britzmedi-api-proxy.mmakid.workers.dev', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json', 'x-api-key': apiKey },
    body: JSON.stringify({
      model: 'claude-sonnet-4-5-20250929',
      max_tokens: 3000,
      messages: [{ role: 'user', content: prompt }],
    }),
  });

  const data = await res.json();
  const text = data.content?.map(b => b.text || '').join('') || '';
  const usage = data.usage || null;

  // JSON íŒŒì‹±
  try {
    const cleaned = text.replace(/```json|```/g, '').trim();
    const analyses = JSON.parse(cleaned);

    // ë…¼ë¬¸ ë°ì´í„°ì— ë¶„ì„ ê²°ê³¼ í•©ì¹˜ê¸°
    return validPapers.map((paper, i) => {
      const analysis = analyses.find(a => a.index === i + 1) || {};
      return {
        ...paper,
        summaryKr: analysis.summary_kr || '',
        productConnection: analysis.product_connection || '',
        contentAngle: analysis.content_angle || '',
        impactScore: analysis.impact_score || 1,
        recommendedChannels: analysis.recommended_channels || [],
        headlineSuggestion: analysis.headline_suggestion || '',
      };
    }).sort((a, b) => b.impactScore - a.impactScore);  // ì˜í–¥ë ¥ ìˆœ ì •ë ¬
  } catch (e) {
    console.error('AI analysis parse failed:', e);
    return validPapers.map(p => ({ ...p, impactScore: 0, summaryKr: 'ë¶„ì„ ì‹¤íŒ¨' }));
  }
}
```

---

### 3. UI ì»´í¬ë„ŒíŠ¸: ResearchExplorer

#### ìƒˆ íŒŒì¼: `src/components/create/ResearchExplorer.jsx`

ê¸°ì¡´ ìˆ˜ë™ ì…ë ¥ í¼ì„ ì™„ì „íˆ ëŒ€ì²´í•©ë‹ˆë‹¤.

```jsx
/**
 * ResearchExplorer: ë…¼ë¬¸ ìë™ ê²€ìƒ‰ â†’ ì¶”ì²œ â†’ ì›í´ë¦­ ì½˜í…ì¸  ìƒì„±
 * GeneralContentFormì˜ research ìœ í˜• ëŒ€ì‹  ì´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©
 */
import { useState, useEffect } from 'react';
import { RESEARCH_QUERIES, autoSearchPapers } from '../../lib/pubmedSearch';
import { analyzePapers } from '../../lib/researchAnalyzer';

export default function ResearchExplorer({ onSelect, apiKey, onBack }) {
  const [papers, setPapers] = useState([]);
  const [loading, setLoading] = useState(false);
  const [loadingStage, setLoadingStage] = useState('');  // 'ê²€ìƒ‰ ì¤‘...' | 'ë¶„ì„ ì¤‘...'
  const [error, setError] = useState(null);
  const [selectedQueryIds, setSelectedQueryIds] = useState(null);  // null = ì „ì²´

  // ì´ˆê¸° ë¡œë“œ: ìë™ ê²€ìƒ‰ + AI ë¶„ì„
  useEffect(() => {
    if (apiKey) {
      handleSearch();
    }
  }, []);

  const handleSearch = async (queryIds = null) => {
    setLoading(true);
    setError(null);
    setPapers([]);

    try {
      // Step 1: PubMed ê²€ìƒ‰
      setLoadingStage('ğŸ” PubMedì—ì„œ ê´€ë ¨ ë…¼ë¬¸ ê²€ìƒ‰ ì¤‘...');
      const rawPapers = await autoSearchPapers(queryIds, 5);

      if (rawPapers.length === 0) {
        setError('ê´€ë ¨ ë…¼ë¬¸ì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.');
        setLoading(false);
        return;
      }

      // Step 2: AI ë¶„ì„
      setLoadingStage(`ğŸ“‘ ${rawPapers.length}ê°œ ë…¼ë¬¸ ë¶„ì„ ì¤‘... (AIê°€ ì½ê³  ìˆì–´ìš”)`);
      const analyzed = await analyzePapers(rawPapers, apiKey);

      setPapers(analyzed);
    } catch (e) {
      setError(`ê²€ìƒ‰ ì‹¤íŒ¨: ${e.message}`);
    } finally {
      setLoading(false);
      setLoadingStage('');
    }
  };

  // ë…¼ë¬¸ ì„ íƒ â†’ contentSource ìƒì„± â†’ ì±„ë„ ì¬ê°€ê³µìœ¼ë¡œ ì´ë™
  const handleSelectPaper = (paper) => {
    onSelect({
      type: 'research',
      title: paper.headlineSuggestion || paper.title,
      body: `[ë…¼ë¬¸ ì œëª©]\n${paper.title}\n\n[ì €ë„] ${paper.journal} (${paper.pubDate})\n[DOI] ${paper.doi}\n[PubMed] ${paper.url}\n\n[í•µì‹¬ ê²°ë¡ ]\n${paper.summaryKr}\n\n[ì´ˆë¡]\n${paper.abstract}\n\n[ì œí’ˆ ì—°ê²°]\n${paper.productConnection}\n\n[ì½˜í…ì¸  ê°ë„]\n${paper.contentAngle}`,
      metadata: {
        pmid: paper.pmid,
        paperTitle: paper.title,
        journal: paper.journal,
        doi: paper.doi,
        pubDate: paper.pubDate,
        url: paper.url,
        summaryKr: paper.summaryKr,
        productConnection: paper.productConnection,
        contentAngle: paper.contentAngle,
        relatedProducts: paper.relatedProducts,
      },
      channels: paper.recommendedChannels,
      date: new Date().toISOString().slice(0, 10),
    });
  };

  return (
    <div className="space-y-4">
      {/* í—¤ë” */}
      <div className="flex items-center gap-2">
        <button onClick={onBack} className="text-steel">â†</button>
        <span className="text-2xl">ğŸ“‘</span>
        <h2 className="text-lg font-bold">ë…¼ë¬¸ ê¸°ë°˜ ì½˜í…ì¸ </h2>
      </div>
      <p className="text-sm text-steel">
        PubMedì—ì„œ BRITZMEDI ì œí’ˆ ê´€ë ¨ ìµœì‹  ë…¼ë¬¸ì„ ìë™ìœ¼ë¡œ ê²€ìƒ‰í•˜ê³ ,
        AIê°€ ì½˜í…ì¸  ì†Œì¬ë¡œ ì¶”ì²œí•©ë‹ˆë‹¤.
      </p>

      {/* ê²€ìƒ‰ ì¹´í…Œê³ ë¦¬ í•„í„° */}
      <div className="flex flex-wrap gap-2">
        <button
          onClick={() => { setSelectedQueryIds(null); handleSearch(null); }}
          className={`px-3 py-1.5 rounded-full text-xs border ${
            !selectedQueryIds ? 'bg-dark text-white' : 'bg-white text-steel border-pale'
          }`}
        >
          ì „ì²´
        </button>
        {RESEARCH_QUERIES.map(q => (
          <button
            key={q.id}
            onClick={() => { setSelectedQueryIds([q.id]); handleSearch([q.id]); }}
            className={`px-3 py-1.5 rounded-full text-xs border ${
              selectedQueryIds?.includes(q.id) ? 'bg-dark text-white' : 'bg-white text-steel border-pale'
            }`}
          >
            {q.label}
          </button>
        ))}
      </div>

      {/* ë¡œë”© */}
      {loading && (
        <div className="text-center py-12">
          <div className="animate-spin text-2xl mb-3">âš™ï¸</div>
          <p className="text-sm text-steel">{loadingStage}</p>
        </div>
      )}

      {/* ì—ëŸ¬ */}
      {error && (
        <div className="bg-red-50 text-red-600 p-3 rounded-lg text-sm">{error}</div>
      )}

      {/* ë…¼ë¬¸ ì¶”ì²œ ë¦¬ìŠ¤íŠ¸ */}
      {!loading && papers.length > 0 && (
        <div className="space-y-3">
          <p className="text-sm text-steel">{papers.length}ê°œ ë…¼ë¬¸ ë¶„ì„ ì™„ë£Œ</p>

          {papers.map((paper, i) => (
            <div key={paper.pmid} className="bg-white border border-pale rounded-xl p-4 space-y-2">
              {/* ì˜í–¥ë ¥ ë°°ì§€ */}
              <div className="flex items-center gap-2">
                {paper.impactScore >= 4 && (
                  <span className="bg-red-100 text-red-600 text-[10px] font-bold px-2 py-0.5 rounded-full">
                    ğŸ”¥ ì¶”ì²œ
                  </span>
                )}
                {paper.impactScore === 3 && (
                  <span className="bg-yellow-100 text-yellow-700 text-[10px] font-bold px-2 py-0.5 rounded-full">
                    â­ í™œìš© ê°€ëŠ¥
                  </span>
                )}
                <span className="text-[10px] text-mist">
                  ì˜í–¥ë ¥ {'â˜…'.repeat(paper.impactScore)}{'â˜†'.repeat(5 - paper.impactScore)}
                </span>
              </div>

              {/* ì œëª© (í•œê¸€ ìš”ì•½) */}
              <h3 className="font-bold text-sm">{paper.headlineSuggestion || paper.summaryKr}</h3>

              {/* ì›ë¬¸ ì œëª© */}
              <p className="text-xs text-mist line-clamp-2">{paper.title}</p>

              {/* ì €ë„ + ë‚ ì§œ */}
              <p className="text-xs text-steel">{paper.journal} Â· {paper.pubDate}</p>

              {/* í•µì‹¬ ê²°ë¡  */}
              <p className="text-sm text-dark">{paper.summaryKr}</p>

              {/* ì œí’ˆ ì—°ê²° */}
              <div className="bg-blue-50 p-2 rounded-lg">
                <p className="text-xs text-blue-700">
                  ğŸ”— <span className="font-medium">ì œí’ˆ ì—°ê²°:</span> {paper.productConnection}
                </p>
              </div>

              {/* ì¶”ì²œ ì±„ë„ */}
              <div className="flex gap-1">
                {paper.recommendedChannels.map(ch => (
                  <span key={ch} className="text-[10px] bg-gray-100 px-2 py-0.5 rounded-full">
                    {ch === 'linkedin' ? 'LinkedIn' : ch === 'naver-blog' ? 'ë„¤ì´ë²„ë¸”ë¡œê·¸' : ch === 'newsletter' ? 'ë‰´ìŠ¤ë ˆí„°' : ch}
                  </span>
                ))}
              </div>

              {/* ì½˜í…ì¸  ë§Œë“¤ê¸° ë²„íŠ¼ */}
              <button
                onClick={() => handleSelectPaper(paper)}
                className="w-full py-2.5 bg-accent text-white rounded-lg font-bold text-sm hover:bg-accent/90 transition-colors"
              >
                ì´ ë…¼ë¬¸ìœ¼ë¡œ ì½˜í…ì¸  ë§Œë“¤ê¸° â†’
              </button>

              {/* PubMed ì›ë¬¸ ë§í¬ */}
              <a
                href={paper.url}
                target="_blank"
                rel="noopener noreferrer"
                className="text-[10px] text-blue-500 underline"
              >
                PubMed ì›ë¬¸ ë³´ê¸° â†—
              </a>
            </div>
          ))}
        </div>
      )}

      {/* ìˆ˜ë™ ì…ë ¥ í´ë°± (í˜¹ì‹œ íŠ¹ì • ë…¼ë¬¸ì„ ì§ì ‘ ë„£ê³  ì‹¶ì„ ë•Œ) */}
      {!loading && (
        <details className="text-sm">
          <summary className="text-steel cursor-pointer">
            ğŸ’¡ íŠ¹ì • ë…¼ë¬¸ì„ ì§ì ‘ ì…ë ¥í•˜ê³  ì‹¶ë‹¤ë©´
          </summary>
          <div className="mt-2 p-3 bg-gray-50 rounded-lg space-y-2">
            <p className="text-xs text-mist">
              PubMed URL ë˜ëŠ” DOIë¥¼ ë¶™ì—¬ë„£ìœ¼ë©´ ìë™ìœ¼ë¡œ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
            </p>
            <input
              type="text"
              placeholder="ì˜ˆ: https://pubmed.ncbi.nlm.nih.gov/41014039/ ë˜ëŠ” 10.1111/jocd.70463"
              className="w-full p-2 border border-pale rounded text-xs"
              onKeyDown={async (e) => {
                if (e.key === 'Enter') {
                  // DOI ë˜ëŠ” PMID ì¶”ì¶œ â†’ fetchPaperDetails â†’ analyzePapers â†’ ì¶”ê°€
                  // êµ¬í˜„ì€ Claude Codeì—ì„œ
                }
              }}
            />
          </div>
        </details>
      )}
    </div>
  );
}
```

---

### 4. Create.jsx ì—°ê²° ë³€ê²½

```jsx
// ê¸°ì¡´: ëª¨ë“  ë¹„-ë³´ë„ìë£Œ ìœ í˜•ì— GeneralContentForm ì‚¬ìš©
// ë³€ê²½: research ìœ í˜•ë§Œ ResearchExplorer ì‚¬ìš©

if (selectedType === 'research') {
  return (
    <ResearchExplorer
      onBack={() => setSelectedType(null)}
      onSelect={handleGoToRepurposeGeneral}
      apiKey={apiKey}
    />
  );
}

// ë‚˜ë¨¸ì§€ ìœ í˜•ì€ ê¸°ì¡´ GeneralContentForm ì‚¬ìš©
return (
  <GeneralContentForm
    contentType={selectedType}
    onBack={() => setSelectedType(null)}
    onSubmit={handleGoToRepurposeGeneral}
    apiKey={apiKey}
  />
);
```

---

### 5. CONTENT_TYPESì—ì„œ research í•„ë“œ ë³€ê²½

```javascript
// contentTypes.jsì—ì„œ research ìˆ˜ì •
research: {
  label: 'ë…¼ë¬¸/ì—°êµ¬ í•´ì„¤',
  icon: 'ğŸ“‘',
  description: 'AIê°€ ìµœì‹  ë…¼ë¬¸ì„ ìë™ìœ¼ë¡œ ì°¾ì•„ ì½˜í…ì¸ ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤',
  track: 'A',
  flow: 'research_explorer',  // â† 'simple'ì´ ì•„ë‹Œ ì „ìš© í”Œë¡œìš°
  recommendedChannels: ['linkedin', 'naver-blog', 'newsletter'],
  channelFit: { linkedin: 3, newsletter: 3, 'naver-blog': 3, kakao: 1, instagram: 2 },
  fields: null,  // â† ìˆ˜ë™ ì…ë ¥ í•„ë“œ ì—†ìŒ (ResearchExplorerê°€ ëŒ€ì‹ )
},
```

---

### 6. ë…¼ë¬¸ í•´ì„¤ ì „ìš© ì±„ë„ í”„ë¡¬í”„íŠ¸

ê¸°ì¡´ getTypeSpecificRulesì˜ research ê·œì¹™ì€ ìœ ì§€í•˜ë˜,
í”„ë¡¬í”„íŠ¸ì— ë…¼ë¬¸ ì›ë¬¸ ì •ë³´(ì´ˆë¡, DOI)ê°€ ìë™ í¬í•¨ë˜ë¯€ë¡œ ë” ì •í™•í•œ ê²°ê³¼ê°€ ë‚˜ì˜µë‹ˆë‹¤.

```javascript
// getChannelPromptForTypeì—ì„œ research ì „ìš© ì²˜ë¦¬
if (contentType === 'research') {
  return `ë‹¹ì‹ ì€ í”¼ë¶€ê³¼/ë©”ë””ì»¬ ì—ìŠ¤í…Œí‹± ë¶„ì•¼ì˜ ë…¼ë¬¸ í•´ì„¤ ì „ë¬¸ ì½˜í…ì¸  ì‘ê°€ì…ë‹ˆë‹¤.

ì•„ë˜ ë…¼ë¬¸ì„ ${getChannelLabel(channelId)} ë…ìì—ê²Œ ë§ëŠ” êµìœ¡ ì½˜í…ì¸ ë¡œ ë³€í™˜í•˜ì„¸ìš”.

${sourceText}

[í•µì‹¬ ê·œì¹™]
1. ë…¼ë¬¸ ì›ë¬¸(ì´ˆë¡)ì— ìˆëŠ” ë‚´ìš©ë§Œ ì‚¬ìš©. ì—†ëŠ” íš¨ê³¼/ìˆ˜ì¹˜ ì ˆëŒ€ ì¶”ê°€ ê¸ˆì§€.
2. "~í•œ ê²ƒìœ¼ë¡œ ë‚˜íƒ€ë‚¬ë‹¤", "~ë¼ëŠ” ì—°êµ¬ ê²°ê³¼ê°€ ë°œí‘œëë‹¤" ë“± ì¸ìš© ë¬¸ì²´.
3. ì œí’ˆ ì—°ê²°: "[ì œí’ˆ ì—°ê²°]"ì— ëª…ì‹œëœ ê°ë„ë¡œë§Œ ì—°ê²°. 
   "ì´ ì›ë¦¬ë¥¼ ì ìš©í•œ ì¥ë¹„ë¡œëŠ” â—‹â—‹ì´ ìˆë‹¤" ìˆ˜ì¤€. 
   "â—‹â—‹ì´ ì´ íš¨ê³¼ë¥¼ ë‚¸ë‹¤"ëŠ” ê³¼ëŒ€ê´‘ê³  â†’ ê¸ˆì§€.
4. ì¶œì²˜(ì €ë„ëª…, DOI, PubMed URL) ë°˜ë“œì‹œ í¬í•¨.
5. ì˜ë£Œë²• ìœ„ë°˜ í‘œí˜„ ê¸ˆì§€: "ì¹˜ë£Œ", "ì™„ì¹˜", "íš¨ê³¼ ë³´ì¥" ë“±.

${getExistingChannelRules(channelId)}`;
}
```

---

## ë¹„ìš© ì¶”ì •

| ë‹¨ê³„ | API í˜¸ì¶œ | í† í° (ì¶”ì •) | ë¹„ìš© |
|------|---------|------------|------|
| PubMed ê²€ìƒ‰ | 0 (ë¬´ë£Œ API) | 0 | $0 |
| ë…¼ë¬¸ 10ê°œ AI ë¶„ì„ | 1íšŒ | ~5,000 in / ~2,000 out | $0.045 |
| ì±„ë„ 3ê°œ ìƒì„± | 3íšŒ | ~9,000 in / ~4,500 out | $0.095 |
| ì±„ë„ 3ê°œ ê²€ìˆ˜ | 3íšŒ | ~12,000 in / ~2,400 out | $0.072 |
| **ë…¼ë¬¸ ì½˜í…ì¸  1ì„¸íŠ¸** | **~7íšŒ** | **~26,000 in / ~9,000 out** | **~$0.21 (â‚©305)** |

---

## êµ¬í˜„ ì²´í¬ë¦¬ìŠ¤íŠ¸

```
â–¡ 1. src/lib/pubmedSearch.js ì‹ ê·œ ìƒì„± (PubMed API í´ë¼ì´ì–¸íŠ¸)
â–¡ 2. src/lib/researchAnalyzer.js ì‹ ê·œ ìƒì„± (AI ë¶„ì„ í•¨ìˆ˜)
â–¡ 3. src/components/create/ResearchExplorer.jsx ì‹ ê·œ ìƒì„± (UI)
â–¡ 4. src/components/create/Create.jsxì—ì„œ research ìœ í˜•ì¼ ë•Œ ResearchExplorer ë Œë”
â–¡ 5. src/constants/contentTypes.jsì—ì„œ research.flow = 'research_explorer' ë³€ê²½
â–¡ 6. src/constants/prompts.jsì—ì„œ research ì „ìš© ì±„ë„ í”„ë¡¬í”„íŠ¸ ì¶”ê°€
â–¡ 7. CORS í™•ì¸: PubMed APIê°€ ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ í˜¸ì¶œ ê°€ëŠ¥í•œì§€ í™•ì¸
     - ë¶ˆê°€ëŠ¥í•˜ë©´ â†’ Cloudflare Worker í”„ë¡ì‹œ ê²½ìœ 
â–¡ 8. í…ŒìŠ¤íŠ¸: "RF í”¼ë¶€ íƒ€ì´íŠ¸ë‹" ì¹´í…Œê³ ë¦¬ë¡œ ê²€ìƒ‰ â†’ ë…¼ë¬¸ ì¶”ì²œ â†’ ì½˜í…ì¸  ìƒì„±
```

---

## CORS ëŒ€ë¹„: PubMed í”„ë¡ì‹œ

PubMed E-utilitiesëŠ” CORSë¥¼ ê³µì‹ ì§€ì›í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ í˜¸ì¶œì´ ì•ˆ ë˜ë©´, ê¸°ì¡´ `britzmedi-api-proxy.mmakid.workers.dev`ì—
PubMed í”„ë¡ì‹œ ê²½ë¡œë¥¼ ì¶”ê°€í•˜ì„¸ìš”:

```javascript
// Cloudflare Workerì— ì¶”ê°€
if (url.pathname.startsWith('/pubmed/')) {
  const pubmedUrl = 'https://eutils.ncbi.nlm.nih.gov/entrez/eutils/' + url.pathname.replace('/pubmed/', '');
  const params = url.search;
  const res = await fetch(pubmedUrl + params);
  return new Response(res.body, {
    headers: {
      ...res.headers,
      'Access-Control-Allow-Origin': '*',
    },
  });
}
```

ê·¸ëŸ¬ë©´ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ:
```javascript
const PUBMED_PROXY = 'https://britzmedi-api-proxy.mmakid.workers.dev/pubmed/';
// fetch(`${PUBMED_PROXY}esearch.fcgi?...`)
```
