// =====================================================
// Knowledge Base â€” Categories & Default Entries
// =====================================================

export const KB_CATEGORIES = {
  company: { label: 'íšŒì‚¬ ì •ë³´', icon: 'ğŸ¢' },
  product: { label: 'ì œí’ˆ ì •ë³´', icon: 'ğŸ“¦' },
  technology: { label: 'ê¸°ìˆ  ì •ë³´', icon: 'âš™ï¸' },
  certification: { label: 'ì¸ì¦/ì„ìƒ', icon: 'ğŸ“‹' },
  market: { label: 'ì‹œì¥ ì •ë³´', icon: 'ğŸ“ˆ' },
  guidelines: { label: 'í†¤ì•¤ë§¤ë„ˆ/ê·œì¹™', icon: 'ğŸ“' },
};

export const DEFAULT_KB_ENTRIES = [
  {
    id: 'kb-company-1',
    title: 'BRITZMEDI íšŒì‚¬ ì†Œê°œ',
    category: 'company',
    content: `BRITZMEDI Co., Ltd. (ë¸Œë¦¿ì¸ ë©”ë””)
- 2017ë…„ ì„¤ë¦½, ë©”ë””ì»¬ ì—ìŠ¤í…Œí‹± ë””ë°”ì´ìŠ¤ ì „ë¬¸ê¸°ì—…
- ëŒ€í‘œì´ì‚¬: ì´ì‹ ì¬
- ë³¸ì‚¬: ê²½ê¸°ë„ ì„±ë‚¨ì‹œ ë‘”ì´ŒëŒ€ë¡œ 388, í¬ë€ì¸ í…Œí¬ë…¸ 1211í˜¸
- í™ˆí˜ì´ì§€: www.britzmedi.co.kr (êµ­ë‚´) / www.britzmedi.com (ê¸€ë¡œë²Œ)
- ì‚¬ì—… ì˜ì—­: FDA ìŠ¹ì¸ TOROIDAL ê³ ì£¼íŒŒ ê¸°ìˆ  ê¸°ë°˜ EBD(Energy Based Device) ê°œë°œÂ·ì œì¡°Â·ìˆ˜ì¶œ
- íƒ€ê²Ÿ ì‹œì¥: êµ­ë‚´ í”¼ë¶€ê³¼/ì—ìŠ¤í…Œí‹± + í•´ì™¸(ë™ë‚¨ì•„, ì¤‘ë™) ìˆ˜ì¶œ`,
    updatedAt: '2026-02-15T00:00:00.000Z',
  },
  {
    id: 'kb-product-torr',
    title: 'í† ë¥´RF (TORR RF)',
    category: 'product',
    content: `TORR RF â€” FDA ìŠ¹ì¸ TOROIDAL ê³ ì£¼íŒŒ ê¸°ë°˜ ë©”ë””ì»¬ ì—ìŠ¤í…Œí‹± ë””ë°”ì´ìŠ¤
- í•µì‹¬ ê¸°ìˆ : TOROIDAL ê³ ì£¼íŒŒ (BRITZMEDI ë…ì ê¸°ìˆ )
- ë¶„ë¥˜: EBD (Energy Based Device) â€” ì—ë„ˆì§€ ê¸°ë°˜ ì˜ë£Œë¯¸ìš©ê¸°ê¸°
- ì¸ì¦: FDA ìŠ¹ì¸
- ê¸°ëŒ€ íš¨ê³¼: ì½œë¼ê² ë¦¬ëª¨ë¸ë§ ì´‰ì§„, ì‹œìˆ  í›„ ë‹¤ìš´íƒ€ì„ ê°ì†Œì— ê¸°ì—¬
- â€» "ë§ˆì´í¬ë¡œë‹ˆë“¤ë§" ì œí’ˆì´ ì•„ë‹˜. ì •í™•í•œ ë¶„ë¥˜: "TOROIDAL ê³ ì£¼íŒŒ ê¸°ë°˜ EBD"`,
    updatedAt: '2026-02-15T00:00:00.000Z',
  },
  {
    id: 'kb-product-luminowave',
    title: 'ë£¨ë¯¸ë…¸ì›¨ì´ë¸Œ (LuminoWave)',
    category: 'product',
    content: `(ìƒì„¸ ë¯¸ë“±ë¡ â€” ì‚¬ìš©ìê°€ ì¶”í›„ ì…ë ¥)`,
    updatedAt: '2026-02-15T00:00:00.000Z',
  },
  {
    id: 'kb-tech-toroidal',
    title: 'TOROIDAL ê³ ì£¼íŒŒ ê¸°ìˆ ',
    category: 'technology',
    content: `TOROIDAL ê³ ì£¼íŒŒ â€” BRITZMEDI ë…ì ê¸°ìˆ 
- í† ë¡œì´ë‹¬(Toroidal) í˜•íƒœì˜ ê³ ì£¼íŒŒ ì—ë„ˆì§€ ì „ë‹¬ ë°©ì‹
- ê¸°ì¡´ RF ê¸°ìˆ  ëŒ€ë¹„ ê· ì¼í•œ ì—ë„ˆì§€ ë¶„í¬ íŠ¹ì„±
- BRITZMEDIê°€ ìì²´ ê°œë°œí•œ ë…ì  ê¸°ìˆ `,
    updatedAt: '2026-02-15T00:00:00.000Z',
  },
  {
    id: 'kb-tech-ebd',
    title: 'EBD (Energy Based Device)',
    category: 'technology',
    content: `EBD â€” Energy Based Device
- ì—ë„ˆì§€ ê¸°ë°˜ ì˜ë£Œë¯¸ìš©ê¸°ê¸°ë¥¼ ì§€ì¹­í•˜ëŠ” ì—…ê³„ í†µì¹­
- BRITZMEDI ê³ ìœ  ê¸°ìˆ ì´ ì•„ë‹˜ (ì—…ê³„ ê³µí†µ ìš©ì–´)
- TOROIDAL ê³ ì£¼íŒŒëŠ” EBD ì¹´í…Œê³ ë¦¬ì— ì†í•˜ëŠ” BRITZMEDI ë…ì ê¸°ìˆ `,
    updatedAt: '2026-02-15T00:00:00.000Z',
  },
  {
    id: 'kb-cert-fda',
    title: 'FDA ìŠ¹ì¸',
    category: 'certification',
    content: `í† ë¥´RF(TORR RF) FDA ìŠ¹ì¸ ì™„ë£Œ
- ìŠ¹ì¸ ëŒ€ìƒ: TORR RF ë©”ë””ì»¬ ì—ìŠ¤í…Œí‹± ë””ë°”ì´ìŠ¤
- ìŠ¹ì¸ ê¸°ê´€: U.S. FDA (ë¯¸êµ­ ì‹í’ˆì˜ì•½êµ­)`,
    updatedAt: '2026-02-15T00:00:00.000Z',
  },
  {
    id: 'kb-guidelines-forbidden',
    title: 'ì˜ë£Œë²• ê¸ˆì§€ì–´ ëª©ë¡',
    category: 'guidelines',
    content: `ì˜ë£Œê¸°ê¸° ê´‘ê³ ì—ì„œ ì ˆëŒ€ ì‚¬ìš© ê¸ˆì§€í•˜ëŠ” í‘œí˜„:

ê¸ˆì§€ì–´:
- ê·¹ëŒ€í™”, ìµœì†Œí™”
- ìµœê³ , ìµœì´ˆ (ê°ê´€ì  ê·¼ê±° ì—†ì´)
- ì™„ë²½í•œ, íšê¸°ì ì¸, í˜ëª…ì ì¸
- ì™„ì¹˜, 100%, í™•ì‹¤í•œ íš¨ê³¼
- ë¶€ì‘ìš© ì—†ìŒ, ì•ˆì „ ë³´ì¥
- ë¹„êµ ê´‘ê³  (íƒ€ì‚¬ ì œí’ˆëª… ì–¸ê¸‰ ë¹„êµ)
- í™˜ì ëŒ€ìƒ ì§ì ‘ ê´‘ê³  ì–¸ì–´
- ì˜í•™ì  íš¨ëŠ¥ ë‹¨ì • ("~ë¥¼ ì¹˜ë£Œí•©ë‹ˆë‹¤", "~ê°€ ì‚¬ë¼ì§‘ë‹ˆë‹¤")
- "RF ë§ˆì´í¬ë¡œë‹ˆë“¤ë§"ì´ë¼ëŠ” ì œí’ˆ ë¶„ë¥˜ â†’ "TOROIDAL ê³ ì£¼íŒŒ ê¸°ë°˜ EBD" ì‚¬ìš©

í—ˆìš© ëŒ€ì²´ í‘œí˜„:
- ê·¹ëŒ€í™” â†’ ê°œì„ , ì´‰ì§„, í–¥ìƒì— ë„ì›€
- ìµœì†Œí™” â†’ ê°ì†Œ, ì¤„ì´ëŠ” ë° ê¸°ì—¬
- ì™„ë²½í•œ â†’ ìš°ìˆ˜í•œ, ë†’ì€ ìˆ˜ì¤€ì˜
- ìµœì´ˆ â†’ (ê°ê´€ì  ê·¼ê±° ìˆì„ ë•Œë§Œ) êµ­ë‚´/ì„¸ê³„ ìµœì´ˆ + ì¶œì²˜ ëª…ì‹œ
- íš¨ê³¼ í™•ì‹¤ â†’ íš¨ê³¼ê°€ ê¸°ëŒ€ë˜ëŠ”, ì„ìƒì—ì„œ í™•ì¸ëœ
- ë¶€ì‘ìš© ì—†ìŒ â†’ ë¶€ì‘ìš©ì´ ì ì€, ì•ˆì „ì„±ì´ í™•ì¸ëœ`,
    updatedAt: '2026-02-15T00:00:00.000Z',
  },
  {
    id: 'kb-guidelines-press-release',
    title: 'ë³´ë„ìë£Œ ì‘ì„± ê°€ì´ë“œë¼ì¸',
    category: 'guidelines',
    content: `ë³´ë„ìë£Œ ì‘ì„± ì‹œ ë°˜ë“œì‹œ ì¤€ìˆ˜í•  ê·œì¹™:

[ë³´ë„ë¬¸ì²´]
- ì¢…ê²°: "~í–ˆë‹¤", "~ë°í˜”ë‹¤", "~ì „í–ˆë‹¤", "~í•  ì˜ˆì •ì´ë‹¤"
- ì ˆëŒ€ ê¸ˆì§€: ê²½ì–´ì²´("~í•©ë‹ˆë‹¤"), êµ¬ì–´ì²´("~ì¸ë°ìš”"), ëª…ì‚¬í˜•("~í–ˆìŒ")
- 3ì¸ì¹­ ì‹œì : "ìš°ë¦¬/ì €í¬" ì ˆëŒ€ ê¸ˆì§€
- ì¸ìš©ë¬¸: ì‘ì€ë”°ì˜´í‘œ ' ' ì‚¬ìš©

[ì˜ë¬¸ í‘œê¸°]
- ëª¨ë“  ì˜ë¬¸ì€ êµ­ë¬¸(ì˜ë¬¸) ìˆœì„œ, ì²« ë“±ì¥ ì‹œ 1íšŒë§Œ ë³‘ê¸°, ì´í›„ êµ­ë¬¸ë§Œ
- ì˜ˆ: ë¯¸êµ­ ì‹í’ˆì˜ì•½êµ­(FDA) â†’ ì´í›„ ë¯¸êµ­ ì‹í’ˆì˜ì•½êµ­
- ì˜ˆ: í† ë¡œì´ë‹¬(TOROIDAL) â†’ ì´í›„ í† ë¡œì´ë‹¬
- ì˜ˆ: ë¸Œë¦¿ì¸ ë©”ë””(BRITZMEDI) â†’ ì´í›„ ë¸Œë¦¿ì¸ ë©”ë””

[êµ¬ì¡°]
- ì—­í”¼ë¼ë¯¸ë“œ: ì œëª© â†’ ë¶€ì œëª© â†’ ë¦¬ë“œë¬¸(ìœ¡í•˜ì›ì¹™) â†’ ë³¸ë¬¸ â†’ ì¸ìš©ë¬¸ â†’ í–¥í›„ ê³„íš
- í•œ ë¬¸ë‹¨ 2~4ë¬¸ì¥, í•œ ë¬¸ì¥ 40~60ì ì´ë‚´
- ìˆ˜ë™íƒœ ìì œ: "ì²´ê²°ë˜ì—ˆë‹¤" â†’ "ì²´ê²°í–ˆë‹¤"

[ì‹œì œ]
- ì˜ˆê³ í˜•: ë¯¸ë˜ ì‹œì œ ("~í•  ì˜ˆì •ì´ë‹¤")
- ë¦¬ë·°í˜•: ê³¼ê±° ì‹œì œ ("~í–ˆë‹¤")

[íŒ©íŠ¸ ì‚¬ìš©]
- 1ìˆœìœ„: ì†ŒìŠ¤(í™•ì¸ëœ íŒ©íŠ¸), 2ìˆœìœ„: ì§€ì‹ë² ì´ìŠ¤, 3ìˆœìœ„: ì—†ìŒ â†’ [ì…ë ¥ í•„ìš”]
- ì†ŒìŠ¤ì— ì—†ëŠ” ìˆ«ì/ì¸ìš©ë¬¸/í˜„ì¥ ë°˜ì‘ ì ˆëŒ€ ê¸ˆì§€
- ì ì • ë¶„ëŸ‰: A4 1~1.5ë§¤ (1,000~2,000ì)
- ì§§ì€ ë³´ë„ìë£Œ > ë‚ ì¡° í¬í•¨ ê¸´ ë³´ë„ìë£Œ

[ì¶œì²˜ ë¶ˆëª… í‘œí˜„ ê¸ˆì§€]
- "~ë¡œ í‰ê°€ëœë‹¤", "~ë¡œ ì•Œë ¤ì ¸ ìˆë‹¤", "~ë¡œ ì£¼ëª©ë°›ê³  ìˆë‹¤" â†’ ì‚­ì œ
- "~ë¡œ ê¸°ëŒ€ëœë‹¤" ë³¸ë¬¸ ë‚´ ìµœëŒ€ 1íšŒë§Œ`,
    updatedAt: '2026-02-15T00:00:00.000Z',
  },
];

/**
 * Format KB entries for inclusion in AI prompts.
 * Groups by category and returns a formatted text block.
 */
export function formatKBForPrompt(entries) {
  if (!entries || entries.length === 0) return '';

  const grouped = {};
  for (const entry of entries) {
    const cat = KB_CATEGORIES[entry.category]?.label || entry.category;
    if (!grouped[cat]) grouped[cat] = [];
    grouped[cat].push(entry);
  }

  let text = '## íšŒì‚¬ ì§€ì‹ ë² ì´ìŠ¤ (ê²€ì¦ëœ ì°¸ê³  ìë£Œ)\n';
  text += 'ì•„ë˜ëŠ” BRITZMEDIì˜ ê²€ì¦ëœ ì •ë³´ì…ë‹ˆë‹¤. ì½˜í…ì¸  ì‘ì„± ì‹œ ì´ ì •ë³´ë¥¼ ì •í™•íˆ ì°¸ì¡°í•˜ì„¸ìš”.\n';
  text += 'ì§€ì‹ ë² ì´ìŠ¤ì— ì—†ëŠ” ì •ë³´ëŠ” [ì…ë ¥ í•„ìš”]ë¡œ í‘œì‹œí•˜ì„¸ìš”.\n\n';

  for (const [catLabel, items] of Object.entries(grouped)) {
    text += `### ${catLabel}\n`;
    for (const item of items) {
      text += `[${item.title}]\n${item.content}\n`;
      if (item.extractedData?.keywords?.length) {
        text += `í‚¤ì›Œë“œ: ${item.extractedData.keywords.join(', ')}\n`;
      }
      text += '\n';
    }
  }

  return text;
}
